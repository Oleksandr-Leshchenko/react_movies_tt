(this["webpackJsonpreact-starter-pack"]=this["webpackJsonpreact-starter-pack"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"fetchMoviesSuccessAction",(function(){return M})),n.d(r,"fetchMoviesErrorAction",(function(){return g})),n.d(r,"addMovieAction",(function(){return R})),n.d(r,"removeMovieAction",(function(){return A})),n.d(r,"setMovieTitleAction",(function(){return N})),n.d(r,"setMovieReleaseYearAction",(function(){return I})),n.d(r,"setMovieFormatAction",(function(){return C})),n.d(r,"setMovieStarsAction",(function(){return w})),n.d(r,"setSeletedId",(function(){return F})),n.d(r,"fetchMovies",(function(){return Q}));var c={};n.r(c),n.d(c,"setTitleQueryAction",(function(){return L})),n.d(c,"setStarsQueryAction",(function(){return D}));var a=n(1),i=n(0),o=n(7),u=n.n(o),s=n(3),l=n(4),d=n.n(l),b=n(8),j=n(2),p=n(5),f=n(15),v="FETCH_MOVIES_SUCCESS",O="FETCH_MOVIES_ERROR",m="ADD_MOVIE",y="REMOVE_MOVIE",h="SET_MOVIE_TITLE",x="SET_MOVIE_RELEASE_YEAR",S="SET_MOVIE_FORMAT",E="SET_MOVIE_STARS",T="SET_SELECTED_ID",_={movies:[],id:0,Title:"","Release Year":"",Format:"",Stars:"",selectedId:0,errorMessage:""},M=function(e){return{type:v,payload:e}},g=function(e){return{type:O,payload:e}},R=function(e){return{type:m,payload:e}},A=function(e){return{type:y,payload:e}},N=function(e){return{type:h,payload:e}},I=function(e){return{type:x,payload:e}},C=function(e){return{type:S,payload:e}},w=function(e){return{type:E,payload:e}},F=function(e){return{type:T,payload:e}},k=function(e){var t=[];"string"===typeof e&&e.replace(/(?:\r\n|\r|\n)/g,"|").split("||").forEach((function(e){var n=e.split("|"),r={};n.forEach((function(e){var t=e.split(": ");r["".concat(t[0])]=t[1]})),r.id=1e10*Math.random(),t.push(r)}));return t},Q=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://gist.githubusercontent.com/k0stik/3028d42973544dd61c3b4ad863378cad/raw/cca50e86dd745c158491adf35bb212d322d58260/movies.txt",e.next=3,fetch("https://gist.githubusercontent.com/k0stik/3028d42973544dd61c3b4ad863378cad/raw/cca50e86dd745c158491adf35bb212d322d58260/movies.txt");case 3:return e.next=5,e.sent.text();case 5:n=e.sent,r=k(n);try{t(M(r))}catch(c){t(g("Failed to fetch movies"))}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y="SET_TITLE_QUERY",V="SET_STARS_QUERY",q={titleQuery:"",starsQuery:""},L=function(e){return{type:Y,payload:e}},D=function(e){return{type:V,payload:e}},H=function(){var e=Object(s.b)(),t=Object(j.a)(Object(j.a)({},r),c);return Object(p.b)(t,e)},U=(n(29),function(){var e,t=Object(s.c)((function(e){return e.movieReducer})),n=t.movies,r=t.selectedId,c=Object(s.c)((function(e){return e.queryReducer})),i=c.titleQuery,o=c.starsQuery,u=H(),l=u.removeMovieAction,d=u.setSeletedId,b=u.fetchMoviesSuccessAction;return Object(a.jsxs)("ul",{className:"moviesList",children:[Object(a.jsx)("button",{type:"button",className:"button button__sort",onClick:function(){return b(n.sort((function(e,t){return e.Title.localeCompare(t.Title)})))},children:"Sort"}),(e=n,e.filter((function(e){return e.Title.includes(i)})).filter((function(e){return e.Stars.includes(o)}))).map((function(e){return Object(a.jsxs)("li",{className:"moviesList__item",children:[Object(a.jsx)("p",{children:"Title: ".concat(e.Title)}),r===e.id&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Release Year: ".concat(e["Release Year"])}),Object(a.jsx)("p",{children:"Format: ".concat(e.Format)}),Object(a.jsx)("p",{children:"Stars: ".concat(e.Stars)})]}),Object(a.jsxs)("div",{className:"moviesList__item-buttons",children:[r===e.id?Object(a.jsx)("button",{type:"button",className:"button",onClick:function(){return d(0)},children:"Hide info"}):Object(a.jsx)("button",{type:"button",className:"button",onClick:function(){return d(e.id)},children:"Show info"}),Object(a.jsx)("button",{type:"button",className:"button button__remove",onClick:function(){return l(e.Title)},children:"Remove movie"})]})]},e.Title)}))]})}),B=n(16),J=n(13),z=n.n(J),G=function(){var e=H(),t=e.setMovieTitleAction,n=e.setMovieReleaseYearAction,r=e.setMovieFormatAction,c=e.setMovieStarsAction,o=e.addMovieAction,u=Object(s.c)((function(e){return e.movieReducer})),l=u.Title,d=u["Release Year"],b=u.Format,j=u.Stars,p=u.movies,f=Object(i.useState)(!1),v=Object(B.a)(f,2),O=v[0],m=v[1];return Object(a.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t={id:1e10*Math.random(),Title:l,"Release Year":d,Format:b,Stars:j};p.some((function(e){return e.Title===t.Title}))?m(!0):(m(!1),o(t))},children:[Object(a.jsx)("input",{type:"text",className:z()("input",{"input-warning":O}),placeholder:"Title",value:l,onChange:function(e){return t(e.target.value)},required:!0}),Object(a.jsx)("input",{type:"text",className:"input",placeholder:"ReleaseYear",value:d,onChange:function(e){return n(e.target.value)},required:!0}),Object(a.jsx)("input",{type:"text",className:"input",placeholder:"Format",value:b,onChange:function(e){return r(e.target.value)},required:!0}),Object(a.jsx)("input",{type:"text",className:"input",placeholder:"Stars",value:j,onChange:function(e){return c(e.target.value)},required:!0}),Object(a.jsx)("button",{type:"submit",className:"form__button",children:"Add movie"}),O&&Object(a.jsx)("div",{className:"form__warning",children:"Movie with this name already exists"})]})},K=function(){var e=Object(s.c)((function(e){return e.queryReducer})),t=e.titleQuery,n=e.starsQuery,r=H(),c=r.setTitleQueryAction,i=r.setStarsQueryAction;return Object(a.jsxs)("div",{className:"searchBar",children:[Object(a.jsx)("input",{type:"text",className:"input",placeholder:"Search by title",value:t,onChange:function(e){return c(e.target.value)}}),Object(a.jsx)("input",{type:"text",className:"input",placeholder:"Search by cast",value:n,onChange:function(e){return i(e.target.value)}})]})},P=function(){var e=H().fetchMovies;return Object(i.useEffect)((function(){!function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsx)(K,{}),Object(a.jsx)(U,{})]}),Object(a.jsx)(G,{})]})})},W=n(14),X=Object(p.c)({movieReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(j.a)(Object(j.a)({},e),{},{movies:t.payload});case O:return Object(j.a)(Object(j.a)({},e),{},{errorMessage:t.payload});case m:return Object(j.a)(Object(j.a)({},_),{},{movies:[].concat(Object(f.a)(e.movies),[t.payload])});case y:return Object(j.a)(Object(j.a)({},e),{},{movies:e.movies.filter((function(e){return e.Title!==t.payload}))});case h:return Object(j.a)(Object(j.a)({},e),{},{Title:t.payload});case x:return Object(j.a)(Object(j.a)({},e),{},{"Release Year":t.payload});case S:return Object(j.a)(Object(j.a)({},e),{},{Format:t.payload});case E:return Object(j.a)(Object(j.a)({},e),{},{Stars:t.payload});case T:return Object(j.a)(Object(j.a)({},e),{},{selectedId:t.payload});default:return e}},queryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(j.a)(Object(j.a)({},e),{},{titleQuery:t.payload});case V:return Object(j.a)(Object(j.a)({},e),{},{starsQuery:t.payload});default:return e}}}),Z=Object(p.d)(X,Object(p.a)(W.a));u.a.render(Object(a.jsx)(s.a,{store:Z,children:Object(a.jsx)(P,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.39ef09d9.chunk.js.map