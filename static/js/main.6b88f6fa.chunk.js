(this["webpackJsonpreact-starter-pack"]=this["webpackJsonpreact-starter-pack"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"fetchMoviesAction",(function(){return A})),n.d(r,"fetchMoviesErrorAction",(function(){return M})),n.d(r,"addMovieAction",(function(){return w})),n.d(r,"removeMovieAction",(function(){return R})),n.d(r,"setMovieTitleAction",(function(){return N})),n.d(r,"setMovieReleaseYearAction",(function(){return C})),n.d(r,"setMovieFormatAction",(function(){return k})),n.d(r,"setMovieStarsAction",(function(){return F})),n.d(r,"setSeletedId",(function(){return I})),n.d(r,"fetchMovies",(function(){return V}));var c={};n.r(c),n.d(c,"setTitleQueryAction",(function(){return q})),n.d(c,"setStarsQueryAction",(function(){return P})),n.d(c,"setFilePathAction",(function(){return B}));var a=n(0),i=n(1),o=n(9),s=n.n(o),u=n(3),l=(n(28),n(5)),d=n.n(l),b=n(10),j=n(8),f=n(4),p=n(2),O=n(6),v="FETCH_MOVIES",m="FETCH_MOVIES_ERROR",h="ADD_MOVIE",y="REMOVE_MOVIE",x="SET_MOVIE_TITLE",_="SET_MOVIE_RELEASE_YEAR",S="SET_MOVIE_FORMAT",T="SET_MOVIE_STARS",E="SET_SELECTED_ID",g={movies:[],id:0,Title:"","Release Year":"",Format:"VHS",Stars:"",selectedId:0,errorMessage:""},A=function(e){return{type:v,payload:e}},M=function(e){return{type:m,payload:e}},w=function(e){return{type:h,payload:e}},R=function(e){return{type:y,payload:e}},N=function(e){return{type:x,payload:e}},C=function(e){return{type:_,payload:e}},k=function(e){return{type:S,payload:e}},F=function(e){return{type:T,payload:e}},I=function(e){return{type:E,payload:e}},Q=function(e){var t=[];"string"===typeof e&&e.replace(/(?:\r\n|\r|\n)/g,"|").split("||").forEach((function(e){var n=e.split("|"),r={};n.forEach((function(e){var t=e.split(": ");r["".concat(t[0])]=t[1]})),r.id=1e10*Math.random(),t.push(r)}));return t},V=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){var r,c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="https://gist.githubusercontent.com/k0stik/3028d42973544dd61c3b4ad863378cad/raw/cca50e86dd745c158491adf35bb212d322d58260/movies.txt",!e){t.next=7;break}return t.next=4,e.files[0].text();case 4:c=t.sent,t.next=12;break;case 7:return t.next=9,fetch(r);case 9:return t.next=11,t.sent.text();case 11:c=t.sent;case 12:a=Q(c.trim());try{n(A(a))}catch(i){n(M("Failed to fetch movies"))}case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Y="SET_TITLE_QUERY",D="SET_STARS_QUERY",L="SET_FILE_PATH",H={titleQuery:"",starsQuery:"",filePath:""},q=function(e){return{type:Y,payload:e}},P=function(e){return{type:D,payload:e}},B=function(e){return{type:L,payload:e}},U=function(){var e=Object(u.b)(),t=Object(p.a)(Object(p.a)({},r),c);return Object(O.b)(t,e)},z=function(){for(var e=Object(u.c)((function(e){return e.movieReducer})),t=e.movies,n=e.selectedId,r=Object(u.c)((function(e){return e.queryReducer})),c=r.titleQuery,o=r.starsQuery,s=U(),l=s.removeMovieAction,p=s.setSeletedId,O=s.fetchMoviesAction,v=s.fetchMovies,m=s.setFilePathAction,h=new Array(Math.ceil(t.length/10)),y=0;y<h.length;y+=1)h[y]=y;var x=Object(i.useState)(!1),_=Object(f.a)(x,2),S=_[0],T=_[1],E=Object(i.useState)(!1),g=Object(f.a)(E,2),A=g[0],M=g[1],w=Object(i.useState)(1),R=Object(f.a)(w,2),N=R[0],C=R[1],k=Object(i.useState)(h),F=Object(f.a)(k,2),I=F[0],Q=F[1];Object(i.useEffect)((function(){Q(h)}),[t,c,o]);var V,Y=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,(r=new FileReader).readAsDataURL(n.files[0]),r.onload=function(){m(r.result)},0!==n.files[0].size&&n.files[0].name.endsWith(".txt")?v(n):M(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){p(0),T(!1)};return Object(a.jsxs)("ul",{className:"moviesList",children:[Object(a.jsxs)("div",{className:"moviesList__extras",children:[Object(a.jsx)("button",{type:"button",className:"button",onClick:function(){return v(!1)},children:"Load movies from server"}),Object(a.jsx)("button",{type:"button",className:"button button__sort",onClick:function(){return O(function(e){for(var t=Object(j.a)(e).sort((function(e,t){return e.Title.localeCompare(t.Title)})),n=0;n<e.length;n+=1)if(e[n].Title!==t[n].Title)return t;return Object(j.a)(e).reverse()}(t))},children:"Sort"}),Object(a.jsx)("input",{type:"file",accept:".txt",onChange:function(e){return Y(e.target)}}),A&&Object(a.jsxs)("div",{className:"modal_window",children:["Invalid file",Object(a.jsx)("div",{className:"modal_window__buttons",children:Object(a.jsx)("button",{type:"button",className:"modal_window__buttons-close",onClick:function(){return M(!1)},children:"Close"})})]})]}),(V=t,V.slice(10*(N-1),10*N).filter((function(e){return e.Title.includes(c)})).filter((function(e){return e.Stars.includes(o)}))).map((function(e){return Object(a.jsxs)("li",{className:"moviesList__item",children:[Object(a.jsx)("p",{children:"Title: ".concat(e.Title)}),n===e.id&&!S&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Release Year: ".concat(e["Release Year"])}),Object(a.jsx)("p",{children:"Format: ".concat(e.Format)}),Object(a.jsx)("p",{children:"Stars: ".concat(e.Stars)})]}),Object(a.jsxs)("div",{className:"moviesList__item-buttons",children:[n===e.id?Object(a.jsxs)(a.Fragment,{children:[!S&&Object(a.jsx)("button",{type:"button",className:"button",onClick:function(){return p(0)},children:"Hide info"}),S&&Object(a.jsxs)("div",{className:"modal_window",children:["Are you sure you want to delete this movie?",Object(a.jsxs)("div",{className:"modal_window__buttons",children:[Object(a.jsx)("button",{type:"button",className:"modal_window__buttons-delete",onClick:function(){return t=e.Title,l(t),void T(!1);var t},children:"Delete"}),Object(a.jsx)("button",{type:"button",className:"modal_window__buttons-close",onClick:D,children:"Close"})]})]})]}):Object(a.jsx)("button",{type:"button",className:"button",onClick:function(){return p(e.id)},children:"Show info"}),S&&n===e.id&&Object(a.jsx)("button",{type:"button",className:"button",onClick:function(){return p(e.id)},children:"Show info"}),Object(a.jsx)("button",{type:"button",className:"button button__remove",onClick:function(){return t=e.id,p(t),void T(!0);var t},children:"Remove movie"})]})]},e.Title)})),Object(a.jsx)("div",{children:I.map((function(e,t){return Object(a.jsx)("button",{type:"button",className:"button page-button",onClick:function(){return C(t+1)},children:t+1},e+1)}))})]})},J=n(15),W=n.n(J),Z=function(){var e=U(),t=e.setMovieTitleAction,n=e.setMovieReleaseYearAction,r=e.setMovieFormatAction,c=e.setMovieStarsAction,o=e.addMovieAction,s=Object(u.c)((function(e){return e.movieReducer})),l=s.Title,d=s["Release Year"],b=s.Format,j=s.Stars,p=s.movies,O=Object(i.useState)(!1),v=Object(f.a)(O,2),m=v[0],h=v[1];return Object(a.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t={id:1e10*Math.random(),Title:l,"Release Year":d,Format:b,Stars:j};p.some((function(e){return e.Title===t.Title}))?h(!0):(h(!1),o(t))},children:[Object(a.jsx)("input",{type:"text",className:W()("input",{"input-warning":m}),placeholder:"Title",value:l,onChange:function(e){return t(e.target.value)},pattern:".*(?<!\\s)$",required:!0}),Object(a.jsx)("input",{type:"number",className:"input",placeholder:"ReleaseYear",value:d,onChange:function(e){return n(e.target.value)},min:"1850",max:"2022",required:!0}),Object(a.jsxs)("select",{className:"form__button",value:b,onChange:function(e){r(e.target.value),console.log(e.target.value)},children:[Object(a.jsx)("option",{value:"VHS",children:"VHS"}),Object(a.jsx)("option",{value:"DVD",children:"DVD"}),Object(a.jsx)("option",{value:"Blu-Ray",children:"Blu-Ray"})]}),Object(a.jsx)("input",{type:"text",className:"input",placeholder:"Stars",value:j,onChange:function(e){return c(e.target.value)},pattern:"[a-zA-Z,-]{1,}",required:!0}),Object(a.jsx)("button",{type:"submit",className:"form__button",children:"Add movie"}),m&&Object(a.jsx)("div",{className:"form__warning",children:"Movie with this name already exists"})]})},$=function(){var e=Object(u.c)((function(e){return e.queryReducer})),t=e.titleQuery,n=e.starsQuery,r=U(),c=r.setTitleQueryAction,i=r.setStarsQueryAction;return Object(a.jsxs)("div",{className:"searchBar",children:[Object(a.jsx)("input",{type:"text",className:"input",placeholder:"Search by title",value:t,onChange:function(e){return c(e.target.value)}}),Object(a.jsx)("input",{type:"text",className:"input",placeholder:"Search by cast",value:n,onChange:function(e){return i(e.target.value)}})]})},G=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsx)($,{}),Object(a.jsx)(z,{})]}),Object(a.jsx)(Z,{})]})})},K=n(16),X=Object(O.c)({movieReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(p.a)(Object(p.a)({},e),{},{movies:t.payload});case m:return Object(p.a)(Object(p.a)({},e),{},{errorMessage:t.payload});case h:return Object(p.a)(Object(p.a)({},g),{},{movies:[].concat(Object(j.a)(e.movies),[t.payload])});case y:return Object(p.a)(Object(p.a)({},e),{},{movies:e.movies.filter((function(e){return e.Title!==t.payload}))});case x:return Object(p.a)(Object(p.a)({},e),{},{Title:t.payload});case _:return Object(p.a)(Object(p.a)({},e),{},{"Release Year":t.payload});case S:return Object(p.a)(Object(p.a)({},e),{},{Format:t.payload});case T:return Object(p.a)(Object(p.a)({},e),{},{Stars:t.payload});case E:return Object(p.a)(Object(p.a)({},e),{},{selectedId:t.payload});default:return e}},queryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(p.a)(Object(p.a)({},e),{},{titleQuery:t.payload});case D:return Object(p.a)(Object(p.a)({},e),{},{starsQuery:t.payload});case L:return Object(p.a)(Object(p.a)({},e),{},{filePath:t.payload});default:return e}}}),ee=Object(O.d)(X,Object(O.a)(K.a));s.a.render(Object(a.jsx)(u.a,{store:ee,children:Object(a.jsx)(G,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.6b88f6fa.chunk.js.map